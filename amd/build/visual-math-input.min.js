define ("qtype_shortmath/visual-math-input",["exports","qtype_shortmath/mathquill"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);function c(a){if("undefined"==typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(a=d(a))){var b=0,c=function(){};return{s:c,n:function n(){if(b>=a.length)return{done:!0};return{done:!1,value:a[b++]}},e:function e(a){throw a},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,f=!0,g=!1,h;return{s:function s(){e=a[Symbol.iterator]()},n:function n(){var a=e.next();f=a.done;return a},e:function e(a){g=!0;h=a},f:function f(){try{if(!f&&null!=e.return)e.return()}finally{if(g)throw h}}}}function d(a,b){if(!a)return;if("string"==typeof a)return e(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return e(a,b)}function e(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++){d[c]=a[c]}return d}function f(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function g(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function h(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function i(a,b,c){if(b)h(a.prototype,b);if(c)h(a,c);return a}function j(a,b){var c=b.get(a);if(!c){throw new TypeError("attempted to get private field on non-instance")}if(c.get){return c.get.call(a)}return c.value}function k(a,b,c){var d=b.get(a);if(!d){throw new TypeError("attempted to set private field on non-instance")}if(d.set){d.set.call(a,c)}else{if(!d.writable){throw new TypeError("attempted to set read only private field")}d.value=c}return c}var l=function(){function a(c,d){var e=this;g(this,a);m.set(this,{writable:!0,value:void 0});n.set(this,{writable:!0,value:void 0});o.set(this,{writable:!0,value:void 0});p.set(this,{writable:!0,value:void 0});q.set(this,{writable:!0,value:void 0});k(this,m,c);if("string"==typeof d){k(this,o,c.closest(d))}k(this,p,document.createElement("div"));j(this,p).classList.add("visual-math-input-field");var f=b.default.getInterface(2);k(this,n,f.MathField(j(this,p),{spaceBehavesLikeTab:!0,handlers:{edit:function edit(a){e.onEdit(c,a)}}}));this.parent.appendChild(j(this,p));this.onEdit=function(a,b){a.value="\\[ ".concat(b.latex()," \\]")};k(this,q,this.parent.querySelector("textarea"));this.textarea.addEventListener("blur",function(){})}i(a,[{key:"enable",value:function enable(){this.textarea.setAttribute("disabled",!1)}},{key:"disable",value:function disable(){this.textarea.setAttribute("disabled",!0)}},{key:"parent",get:function get(){return j(this,o)}},{key:"textarea",get:function get(){return j(this,q)}},{key:"rawInput",get:function get(){return j(this,m)}},{key:"mathInput",get:function get(){return j(this,n)}}]);return a}(),m=new WeakMap,n=new WeakMap,o=new WeakMap,p=new WeakMap,q=new WeakMap,r=function(){function a(b,c,d){g(this,a);f(this,"element",null);this.name=b;this.text=c;this.onClick=d}i(a,[{key:"enable",value:function enable(){if(null!==this.element){return}this.element=document.createElement("button");this.element.innerHTML=this.text;this.element.classList.add("visual-math-input-control","btn","btn-primary")}}]);return a}(),s=function(){function a(b){g(this,a);f(this,"controls",[]);this.wrapper=b;this.wrapper.classList.add("visual-math-input-wrapper");this.defineDefault()}i(a,[{key:"define",value:function define(a,b,c){this.controls[a]=new r(a,b,c)}},{key:"enable",value:function enable(a){var b=c(a),d;try{for(b.s();!(d=b.n()).done;){var e=d.value,f=this.controls[e];f.enable();console.log(f);this.wrapper.appendChild(f.element)}}catch(a){b.e(a)}finally{b.f()}}},{key:"enableAll",value:function enableAll(){var a=c(this.controls),b;try{for(a.s();!(b=a.n()).done;){var d=b.value;d.enable();this.wrapper.appendChild(d.element)}}catch(b){a.e(b)}finally{a.f()}}},{key:"defineDefault",value:function defineDefault(){this.define("sqrt","<span class=\"mq-root-block\">&radic;</span>",function(a){return a.cmd("\\sqrt")});this.define("int","<span class=\"mq-root-block\">&int;</span>",function(a){return a.cmd("\\int")});this.define("sum","<span class=\"mq-root-block\"><span class=\"mq-large-operator mq-non-leaf\">&sum;</span></span>",function(a){return a.cmd("\\sum")});this.define("lim","<span class=\"mq-root-block\">lim</span>",function(a){a.cmd("\\lim").typedText("_").write("x").cmd("\\to").write("0").moveToRightEnd()});this.define("nchoosek","<div class=\"mq-math-mode\" style=\"cursor:pointer;font-size:100%;\">\n            <span class=\"mq-root-block\">\n                <span class=\"mq-non-leaf\">\n                    <span class=\"mq-paren mq-scaled\" style=\"transform: scale(0.8, 1.5);\">(</span>\n                    <span class=\"mq-non-leaf\" style=\"margin-top:0;\">\n                        <span class=\"mq-array mq-non-leaf\">\n                            <span style=\"font-size: 14px;\">\n                                <var>n</var>\n                            </span>\n                            <span style=\"font-size: 14px;\">\n                                <var>k</var>\n                            </span>\n                        </span>\n                    </span>\n                    <span class=\"mq-paren mq-scaled\" style=\"transform: scale(0.8, 1.5);\">)</span>\n                </span>\n            </span>\n        </div>",function(a){return a.cmd("\\choose")});this.define("divide","<span class=\"mq-root-block\">/</span>",function(a){return a.cmd("\\frac")});this.define("plusminus","<span class=\"mq-root-block\">&plusmn;</span>",function(a){return a.cmd("\\pm")});this.define("theta","<span class=\"mq-root-block\">&theta;</span>",function(a){return a.cmd("\\theta")});this.define("pi","<span class=\"mq-root-block\">&pi;</span>",function(a){return a.cmd("\\pi")});this.define("infinity","<span class=\"mq-root-block\">&infin;</span>",function(a){return a.cmd("\\infinity")});this.define("caret","\n        <div class=\"mq-math-mode\" style=\"cursor:pointer;font-size:100%;\">\n            <span class=\"mq-root-block\">\n                <var>x</var>\n                <span class=\"mq-supsub mq-non-leaf mq-sup-only\">\n                    <span class=\"mq-sup\">\n                        <var>y</var>\n                    </span>\n                </span>\n            </span>\n        </div>",function(a){return a.cmd("^")})}}]);return a}();a.default={Input:l,Control:r,ControlList:s};return a.default});
//# sourceMappingURL=visual-math-input.min.js.map
