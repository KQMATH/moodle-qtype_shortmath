"use strict";var _createClass=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}define(["jquery","./mathquill"],function(n,e){var t=null,a=function(){function a(s,i){var r=this;_classCallCheck(this,a),this.$input=n(s),this.$parent=n(i);var l=document.createElement("div");this.wrapper=n(l).addClass("visual-math-input-field");var o=e.getInterface(2);this.field=o.MathField(l,{spaceBehavesLikeTab:!0,handlers:{edit:function(e){r.onEdit(n(s),e)}}}),this.$parent.append(l),this.onEdit=function(n,e){return n.val("\\[ "+e.latex()+" \\]")},this.$textarea.on("blur",function(){return t=r})}return _createClass(a,[{key:"enable",value:function(){this.$textarea.prop("disabled",!1)}},{key:"disable",value:function(){this.$textarea.prop("disabled",!0)}},{key:"$textarea",get:function(){return n(this.field.el()).find("textarea")}}]),a}(),s=function(){function e(n,t,a){_classCallCheck(this,e),this.name=n,this.text=t,this.onClick=a,this.$element=null}return _createClass(e,[{key:"enable",value:function(){var e=this;if(null===this.$element){var a=document.createElement("button");this.$element=n(a),this.$element.html(this.text),this.$element.addClass("visual-math-input-control btn btn-primary"),this.$element.on("click",function(n){n.preventDefault(),null!==t&&(e.onClick(t.field),t.field.focus())})}}}]),e}(),i=function(){function e(t){_classCallCheck(this,e),this.controls=[],this.$wrapper=n(t),this.$wrapper.addClass("visual-math-input-wrapper"),this.defineDefault()}return _createClass(e,[{key:"define",value:function(n,e,t){this.controls[n]=new s(n,e,t)}},{key:"enable",value:function(n){var e=!0,t=!1,a=void 0;try{for(var s,i=n[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value,l=this.controls[r];l.enable(),this.$wrapper.append(l.$element)}}catch(n){t=!0,a=n}finally{try{!e&&i.return&&i.return()}finally{if(t)throw a}}}},{key:"enableAll",value:function(){for(var n in this.controls){var e=this.controls[n];e.enable(),this.$wrapper.append(e.$element)}}},{key:"defineDefault",value:function(){var n='<div class="mq-math-mode" style="cursor:pointer;font-size:100%;">';n+='<span class="mq-root-block">',n+='<span class="mq-non-leaf">',n+='<span class="mq-paren mq-scaled" style="transform: scale(0.8, 1.5);">(</span>',n+='<span class="mq-non-leaf" style="margin-top:0;">',n+='<span class="mq-array mq-non-leaf">',n+='<span style="font-size: 14px;"><var>n</var></span>',n+='<span style="font-size: 14px;"><var>k</var></span>',n+="</span></span>",n+='<span class="mq-paren mq-scaled" style="transform: scale(0.8, 1.5);">)</span></span>',n+="</span></div>";var e='<div class="mq-math-mode" style="cursor:pointer;font-size:100%;">';e+='<span class="mq-root-block">',e+="<var>x</var>",e+='<span class="mq-supsub mq-non-leaf mq-sup-only">',e+='<span class="mq-sup">',e+="<var>y</var>",e+="</span></span></span></div>",this.define("sqrt",'<span class="mq-root-block">&radic;</span>',function(n){return n.cmd("\\sqrt")}),this.define("int",'<span class="mq-root-block">&int;</span>',function(n){return n.cmd("\\int")}),this.define("sum",'<span class="mq-root-block"><span class="mq-large-operator mq-non-leaf">&sum;</span></span>',function(n){return n.cmd("\\sum")}),this.define("lim",'<span class="mq-root-block">lim</span>',function(n){n.cmd("\\lim").typedText("_").write("x").cmd("\\to").write("0").moveToRightEnd()}),this.define("nchoosek",n,function(n){return n.cmd("\\choose")}),this.define("divide",'<span class="mq-root-block">/</span>',function(n){return n.cmd("\\frac")}),this.define("plusminus",'<span class="mq-root-block">&plusmn;</span>',function(n){return n.cmd("\\pm")}),this.define("theta",'<span class="mq-root-block">&theta;</span>',function(n){return n.cmd("\\theta")}),this.define("pi",'<span class="mq-root-block">&pi;</span>',function(n){return n.cmd("\\pi")}),this.define("infinity",'<span class="mq-root-block">&infin;</span>',function(n){return n.cmd("\\infinity")}),this.define("caret",e,function(n){return n.cmd("^")})}}]),e}();return{Input:a,Control:s,ControlList:i}});