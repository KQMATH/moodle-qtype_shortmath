"use strict";var _createClass=function(){function n(n,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}return function(t,e,s){return e&&n(t.prototype,e),s&&n(t,s),t}}();function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}define(["jquery","./mathquill"],function(n,t){var e=null,s=function(){function s(a,i){var r=this;_classCallCheck(this,s),this.$input=n(a),this.$parent=n(i);var l=document.createElement("div");n(l).addClass("visual-math-input-field");var o=t.getInterface(2);this.field=o.MathField(l,{spaceBehavesLikeTab:!0,handlers:{edit:function(t){r.onEdit(n(a),t)}}}),this.$parent.append(l),this.onEdit=function(n,t){return n.val("\\[ "+t.latex()+" \\]")},this.$textarea.on("blur",function(){return e=r})}return _createClass(s,[{key:"enable",value:function(){this.$textarea.prop("disabled",!1)}},{key:"disable",value:function(){this.$textarea.prop("disabled",!0)}},{key:"$textarea",get:function(){return n(this.field.el()).find("textarea")}}]),s}(),a=function(){function t(n,e,s){_classCallCheck(this,t),this.name=n,this.text=e,this.onClick=s,this.$element=null}return _createClass(t,[{key:"enable",value:function(){var t=this;if(null===this.$element){var s=document.createElement("button");this.$element=n(s),this.$element.html(this.text),this.$element.addClass("visual-math-input-control btn btn-primary"),this.$element.on("click",function(n){n.preventDefault(),null!==e&&(t.onClick(e.field),e.field.focus())})}}}]),t}(),i=function(){function t(e){_classCallCheck(this,t),this.controls=[],this.$wrapper=n(e),this.$wrapper.addClass("visual-math-input-wrapper"),this.defineDefault()}return _createClass(t,[{key:"define",value:function(n,t,e){this.controls[n]=new a(n,t,e)}},{key:"enable",value:function(n){var t=!0,e=!1,s=void 0;try{for(var a,i=n[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var r=a.value,l=this.controls[r];l.enable(),this.$wrapper.append(l.$element)}}catch(n){e=!0,s=n}finally{try{!t&&i.return&&i.return()}finally{if(e)throw s}}}},{key:"enableAll",value:function(){for(var n in this.controls){var t=this.controls[n];t.enable(),this.$wrapper.append(t.$element)}}},{key:"defineDefault",value:function(){var n='<div class="mq-math-mode" style="cursor:pointer;font-size:100%;">';n+='<span class="mq-root-block">',n+='<span class="mq-non-leaf">',n+='<span class="mq-paren mq-scaled" style="transform: scale(0.8, 1.5);">(</span>',n+='<span class="mq-non-leaf" style="margin-top:0;">',n+='<span class="mq-array mq-non-leaf">',n+='<span style="font-size: 14px;"><var>n</var></span>',n+='<span style="font-size: 14px;"><var>k</var></span>',n+="</span></span>",n+='<span class="mq-paren mq-scaled" style="transform: scale(0.8, 1.5);">)</span></span>',n+="</span></div>";var t='<div class="mq-math-mode" style="cursor:pointer;font-size:100%;">';t+='<span class="mq-root-block">',t+="<var>x</var>",t+='<span class="mq-supsub mq-non-leaf mq-sup-only">',t+='<span class="mq-sup">',t+="<var>y</var>",t+="</span></span></span></div>",this.define("sqrt",'<span class="mq-root-block">&radic;</span>',function(n){return n.cmd("\\sqrt")}),this.define("int",'<span class="mq-root-block">&int;</span>',function(n){return n.cmd("\\int")}),this.define("dint",'<span class="mq-root-block">&int;<sub>0</sub><sup>1</sup></span>',function(n){return n.write("\\int_0^1")}),this.define("sum",'<span class="mq-root-block"><span class="mq-large-operator mq-non-leaf">&sum;</span></span>',function(n){return n.cmd("\\sum")}),this.define("lim",'<span class="mq-root-block">lim</span>',function(n){n.cmd("\\lim").typedText("_").write("x").cmd("\\to").write("0").moveToRightEnd()}),this.define("nchoosek",n,function(n){return n.cmd("\\choose")}),this.define("divide",'<span class="mq-root-block">/</span>',function(n){return n.cmd("\\frac")}),this.define("plusminus",'<span class="mq-root-block">&plusmn;</span>',function(n){return n.cmd("\\pm")}),this.define("theta",'<span class="mq-root-block">&theta;</span>',function(n){return n.cmd("\\theta")}),this.define("pi",'<span class="mq-root-block">&pi;</span>',function(n){return n.cmd("\\pi")}),this.define("infinity",'<span class="mq-root-block">&infin;</span>',function(n){return n.cmd("\\infinity")}),this.define("caret",t,function(n){return n.cmd("^")})}}]),t}();return{Input:s,Control:a,ControlList:i}});