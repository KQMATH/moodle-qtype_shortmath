{"version":3,"sources":["../src/editor-manager.js"],"names":["define","$","notification","initialize","tooltip","container","on","event","preventDefault","$form","target","closest","find","attr","M","str","qtype_shortmath","editor_path","submit","escapeSelector","children","remove","$templateBox","id","val","confirm","post","editor_action_path","done","message","addNotification","type","fail","jqXHR","textStatus","errorThrown","window","location","replace","plugin_settings_path"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package    qtype_shortmath\n * @author     Sushanth Kotyan <sushanthkotian.s@gmail.com>\n * @copyright  2020 NTNU\n */\n\n/**\n * @module qtype_shortmath/editor-manager\n */\ndefine(['jquery', 'core/notification', 'theme_boost/tooltip'],\n    function ($, notification) {\n        return {\n            initialize: function () {\n                $('[data-toggle=\"tooltip\"]').tooltip({\n                    container: 'body'\n                });\n                $('.edit-template').on('click', event => {\n                    event.preventDefault();\n                    let $form = $(event.target).closest('.template-box').find('form');\n                    $form.attr('action', M.str.qtype_shortmath.editor_path);\n                    $form.attr('method', 'post');\n                    $form.submit();\n                });\n\n                $('.delete-template').on('click', event => {\n                    event.preventDefault();\n\n                    // Clear notifications\n                    $('#' + $.escapeSelector('user-notifications')).children().remove();\n\n                    let $templateBox = $(event.target).closest('.template-box');\n                    let $form = $templateBox.find('form');\n                    let id = $form.find('input[name=\"templateId\"]').val();\n\n                    notification.confirm('Delete Template',\n                        `Delete<b>&nbsp;${$form.find('input[name=\"templateName\"]').val()}&nbsp;</b>from database?`,\n                        'OK', 'Cancel', () => {\n                            $.post(M.str.qtype_shortmath.editor_action_path,\n                                {\n                                    'id': id,\n                                    'type': 'delete'\n                                }\n                            ).done(message => {\n                                if (message > 0) {\n                                    notification.addNotification({\n                                        message: \"Template deleted!\",\n                                        type: \"success\"\n                                    });\n                                    $templateBox.remove();\n                                } else {\n                                    notification.addNotification({\n                                        message: \"Something went wrong!\",\n                                        type: \"error\"\n                                    });\n                                }\n                            }).fail((jqXHR, textStatus, errorThrown) => {\n                                notification.addNotification({\n                                    message: textStatus + ': ' + errorThrown,\n                                    type: \"error\"\n                                });\n                            });\n                        });\n                });\n\n                $('#' + $.escapeSelector('back')).on('click', event => {\n                    event.preventDefault();\n                    window.location.replace(M.str.qtype_shortmath.plugin_settings_path);\n                });\n\n                $('#' + $.escapeSelector('createTemplates')).on('click', event => {\n                    event.preventDefault();\n                    window.location.replace(M.str.qtype_shortmath.editor_path);\n                });\n            }\n        };\n    });\n"],"file":"editor-manager.min.js"}