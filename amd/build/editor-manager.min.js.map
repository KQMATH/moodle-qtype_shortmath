{"version":3,"sources":["../src/editor-manager.js"],"names":["initialize","editorPath","pluginSettingsPath","document","querySelectorAll","forEach","element","Popover","placement","trigger","offsetWidth","scrollWidth","delay","show","addEventListener","event","preventDefault","form","target","closest","querySelector","setAttribute","submit","deleteButton","templateId","value","templateName","notification","saveCancel","window","location","replace"],"mappings":"iOAsBA,uD,aAK0B,QAAbA,CAAAA,UAAa,CAACC,CAAD,CAAaC,CAAb,CAAoC,CAC1DC,QAAQ,CAACC,gBAAT,CAA0B,kCAA1B,EAA8DC,OAA9D,CAAsE,SAAAC,CAAO,CAAI,CAC7E,GAAIC,UAAJ,CAAYD,CAAZ,CAAqB,CACjBE,SAAS,CAAE,KADM,CAEjBC,OAAO,CAAE,OAFQ,CAArB,CAIH,CALD,EAOAN,QAAQ,CAACC,gBAAT,CAA0B,gBAA1B,EAA4CC,OAA5C,CAAoD,SAAAC,CAAO,CAAI,CAC3D,GAAIA,CAAO,CAACI,WAAR,CAAsBJ,CAAO,CAACK,WAAlC,CAA+C,CAC3C,GAAIJ,UAAJ,CAAYD,CAAZ,CAAqB,CACjBM,KAAK,CAAE,CACHC,IAAI,CAAE,CADH,CAEHD,KAAK,CAAE,GAFJ,CADU,CAKjBJ,SAAS,CAAE,KALM,CAMjBC,OAAO,CAAE,OANQ,CAArB,CAQH,CACJ,CAXD,EAaAN,QAAQ,CAACC,gBAAT,CAA0B,gBAA1B,EAA4CC,OAA5C,CAAoD,SAAAC,CAAO,CAAI,CAC3DA,CAAO,CAACQ,gBAAR,CAAyB,OAAzB,CAAkC,SAAAC,CAAK,CAAI,CACvCA,CAAK,CAACC,cAAN,GACA,GAAMC,CAAAA,CAAI,CAAGF,CAAK,CAACG,MAAN,CAAaC,OAAb,CAAqB,eAArB,EAAsCC,aAAtC,CAAoD,MAApD,CAAb,CACAH,CAAI,CAACI,YAAL,CAAkB,QAAlB,CAA4BpB,CAA5B,EACAgB,CAAI,CAACI,YAAL,CAAkB,QAAlB,CAA4B,MAA5B,EACAJ,CAAI,CAACK,MAAL,EACH,CAND,CAOH,CARD,EAUAnB,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8CC,OAA9C,CAAsD,SAAAkB,CAAY,CAAI,CAClEA,CAAY,CAACT,gBAAb,CAA8B,OAA9B,CAAuC,SAAAC,CAAK,CAAI,CAC5CA,CAAK,CAACC,cAAN,GAD4C,GAGtCC,CAAAA,CAAI,CAAGF,CAAK,CAACG,MAAN,CAAaC,OAAb,CAAqB,eAArB,EAAsCC,aAAtC,CAAoD,MAApD,CAH+B,CAItCI,CAAU,CAAGP,CAAI,CAACG,aAAL,+BAA+CK,KAJtB,CAKtCC,CAAY,CAAGT,CAAI,CAACG,aAAL,iCAAiDK,KAL1B,CAQ5CE,UAAaC,UAAb,8BAA8CF,CAA9C,sCAC0BA,CAD1B,wBAEI,QAFJ,CAGI,qBAAeF,CAAf,CAHJ,CAIH,CAZD,CAaH,CAdD,EAgBArB,QAAQ,CAACiB,aAAT,CAAuB,OAAvB,EAAgCN,gBAAhC,CAAiD,OAAjD,CAA0D,SAAAC,CAAK,CAAI,CAC/DA,CAAK,CAACC,cAAN,GACAa,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB7B,CAAxB,CACH,CAHD,EAKAC,QAAQ,CAACiB,aAAT,CAAuB,kBAAvB,EAA2CN,gBAA3C,CAA4D,OAA5D,CAAqE,SAAAC,CAAK,CAAI,CAC1EA,CAAK,CAACC,cAAN,GACAa,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB9B,CAAxB,CACH,CAHD,CAIH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module     qtype_shortmath/editor-manager\n * @package    qtype_shortmath\n * @author     Sushanth Kotyan <sushanthkotian.s@gmail.com> and Simen Wiik <simenwiik@hotmail.com>\n * @copyright  2020 NTNU\n */\n\nimport notification from \"core/notification\";\nimport { deleteTemplate } from \"qtype_shortmath/api-helpers\";\nimport { Popover } from \"theme_boost/popover\";\n// import * as Str from \"core/str\";\n\nexport const initialize = (editorPath, pluginSettingsPath) => {\n    document.querySelectorAll(\".edit-template, .delete-template\").forEach(element => {\n        new Popover(element, {\n            placement: \"top\",\n            trigger: \"hover\"\n        });\n    });\n\n    document.querySelectorAll(\".text-truncate\").forEach(element => {\n        if (element.offsetWidth < element.scrollWidth) {\n            new Popover(element, {\n                delay: {\n                    show: 0,\n                    delay: 300\n                },\n                placement: \"top\",\n                trigger: \"hover\"\n            });\n        }\n    });\n\n    document.querySelectorAll(\".edit-template\").forEach(element => {\n        element.addEventListener(\"click\", event => {\n            event.preventDefault();\n            const form = event.target.closest(\".template-box\").querySelector(\"form\");\n            form.setAttribute(\"action\", editorPath);\n            form.setAttribute(\"method\", \"post\");\n            form.submit();\n        });\n    });\n\n    document.querySelectorAll(\".delete-template\").forEach(deleteButton => {\n        deleteButton.addEventListener(\"click\", event => {\n            event.preventDefault();\n\n            const form = event.target.closest(\".template-box\").querySelector(\"form\");\n            const templateId = form.querySelector(`input[name=\"templateId\"]`).value;\n            const templateName = form.querySelector(`input[name=\"templateName\"]`).value;\n\n            // title, question, saveLabel, saveCallback, cancelCallback\n            notification.saveCancel(`Delete Template <b>${templateName}</b>`,\n                `Delete Template <b>${templateName}</b> from database?`,\n                \"Delete\",\n                deleteTemplate(templateId));\n        });\n    });\n\n    document.querySelector(\"#back\").addEventListener(\"click\", event => {\n        event.preventDefault();\n        window.location.replace(pluginSettingsPath);\n    });\n\n    document.querySelector(\"#createTemplates\").addEventListener(\"click\", event => {\n        event.preventDefault();\n        window.location.replace(editorPath);\n    });\n};"],"file":"editor-manager.min.js"}