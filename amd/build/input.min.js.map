{"version":3,"sources":["../src/input.js"],"names":["define","$","VisualMath","initialize","inputname","readonly","readOnly","$shortanswerInput","escapeSelector","removeClass","$parent","parent","input","Input","$input","hide","onEdit","field","val","latex","get","dispatchEvent","Event","disable","write","controlsWrapper","parents","find","controls","ControlList","enableAll"],"mappings":"AAyBAA,OAAM,yBAAC,CAAC,QAAD,CAAW,mCAAX,CAAD,CAAkD,SAASC,CAAT,CAAYC,CAAZ,CAAwB,CAC5E,MAAO,CACHC,UAAU,CAAE,oBAASC,CAAT,CAAoBC,CAApB,CAA8B,IAClCC,CAAAA,CAAQ,CAAGD,CADuB,CAElCE,CAAiB,CAAGN,CAAC,CAAC,IAAMA,CAAC,CAACO,cAAF,CAAiBJ,CAAjB,CAAP,CAFa,CAItCG,CAAiB,CAACE,WAAlB,CAA8B,UAA9B,EAJsC,GAKlCC,CAAAA,CAAO,CAAGT,CAAC,CAAC,IAAMA,CAAC,CAACO,cAAF,CAAiBJ,CAAjB,CAAP,CAAD,CAAqCO,MAArC,CAA4C,SAA5C,CALwB,CAOlCC,CAAK,CAAG,GAAIV,CAAAA,CAAU,CAACW,KAAf,CAAqBN,CAArB,CAAwCG,CAAxC,CAP0B,CAQtCE,CAAK,CAACE,MAAN,CAAaC,IAAb,GAEA,GAAI,CAACV,CAAL,CAAe,CACXO,CAAK,CAACI,MAAN,CAAe,SAASF,CAAT,CAAiBG,CAAjB,CAAwB,CACnCH,CAAM,CAACI,GAAP,CAAWD,CAAK,CAACE,KAAN,EAAX,EACAL,CAAM,CAACM,GAAP,CAAW,CAAX,EAAcC,aAAd,CAA4B,GAAIC,CAAAA,KAAJ,CAAU,QAAV,CAA5B,CACH,CAEJ,CAND,IAMO,CACHhB,CAAQ,GAAR,CACAM,CAAK,CAACW,OAAN,EACH,CAED,GAAIhB,CAAiB,CAACW,GAAlB,EAAJ,CAA6B,CACzBN,CAAK,CAACK,KAAN,CAAYO,KAAZ,CACIjB,CAAiB,CAACW,GAAlB,EADJ,CAGH,CAED,GAAI,CAACZ,CAAL,CAAe,IACPmB,CAAAA,CAAe,CAAGxB,CAAC,CAAC,IAAMA,CAAC,CAACO,cAAF,CAAiBJ,CAAjB,CAAP,CAAD,CAAqCsB,OAArC,CAA6C,YAA7C,EAA2DC,IAA3D,CAAgE,mBAAhE,CADX,CAEPC,CAAQ,CAAG,GAAI1B,CAAAA,CAAU,CAAC2B,WAAf,CAA2BJ,CAA3B,CAFJ,CAGXG,CAAQ,CAACE,SAAT,EACH,CACJ,CAjCE,CAmCV,CApCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n\n/**\n * @package    qtype_shortmath\n * @author     Andr√© Storhaug <andr3.storhaug@gmail.com>\n * @copyright  2018 NTNU\n */\n\n/**\n * @module qtype_shortmath/input\n */\ndefine(['jquery', 'qtype_shortmath/visual-math-input'], function($, VisualMath) {\n    return {\n        initialize: function(inputname, readonly) {\n            var readOnly = readonly;\n            var $shortanswerInput = $('#' + $.escapeSelector(inputname));\n            // Remove class \"d-inline\" added in shortanswer renderer class, which prevents input from being hidden.\n            $shortanswerInput.removeClass('d-inline');\n            var $parent = $('#' + $.escapeSelector(inputname)).parent('.answer');\n\n            var input = new VisualMath.Input($shortanswerInput, $parent);\n            input.$input.hide();\n\n            if (!readonly) {\n                input.onEdit = function($input, field) {\n                    $input.val(field.latex());\n                    $input.get(0).dispatchEvent(new Event('change')); // Event firing needs to be on a vanilla dom object.\n                };\n\n            } else {\n                readOnly = true;\n                input.disable();\n            }\n\n            if ($shortanswerInput.val()) {\n                input.field.write(\n                    $shortanswerInput.val()\n                );\n            }\n\n            if (!readOnly) {\n                var controlsWrapper = $('#' + $.escapeSelector(inputname)).parents('.shortmath').find('.controls_wrapper');\n                var controls = new VisualMath.ControlList(controlsWrapper);\n                controls.enableAll();\n            }\n        }\n    };\n});\n"],"file":"input.min.js"}