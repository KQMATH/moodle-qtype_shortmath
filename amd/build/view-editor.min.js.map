{"version":3,"sources":["../src/view-editor.js"],"names":["lastFocusedInput","dragged","nodes","draggedIndex","isSuccess","EditorInput","input","parent","textarea","addEventListener","rawInput","setAttribute","classList","add","errorDiv","document","createElement","appendChild","mathInput","value","latex","closest","length","parentElement","children","forEach","element","remove","dispatchEvent","Event","VisualMath","Input","EditorControl","name","text","onClick","command","onclick","event","preventDefault","querySelector","blur","focus","id","target","Array","from","parentNode","indexOf","dataTransfer","setData","dropEffect","style","opacity","getElementById","replaceWith","Control","EditorControlList","wrapper","buttonMathInput","expressionMathInput","console","log","mathquillExpression","__controller","container","mathquillExpressionString","outerHTML","addControl","Date","now","html","control","write","controls","enable","append","ControlList","initialize","templateId","templateName","managerPath","templateNameInput","vmiButton","buttonRawInput","vmiExpression","expressionRawInput","vmiTest","testRawInput","testMathInput","controlsWrapper","saveButton","isDataVisible","initInputFields","change","initControlsWrapper","clearData","targetId","contains","lastChild","nodeName","targetIndex","empty","removeChild","insertBefore","nextSibling","initAddForm","addForm","addButton","textContent","stopPropagation","checkValidity","querySelectorAll","template","notification","addNotification","message","type","initDeleteButton","deleteIcon","firstElementChild","placeholder","initSaveForm","saveForm","data","items","push","button","expression","JSON","stringify","onSave","display","setTimeout","window","location","replace","innerHTML","initBackButton","backButton","Templates","render","then","js","appendNodeContents","fail","exception"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n\n/**\n * @module     qtype_shortmath/input\n * @package    qtype_shortmath\n * @author     Andr√© Storhaug <andr3.storhaug@gmail.com>\n * @copyright  2018 NTNU\n */\n\nimport notification from \"core/notification\";\nimport Templates from \"core/templates\";\nimport {\n    getShortmathTemplate,\n    saveShortmathTemplate\n} from \"qtype_shortmath/api-helpers\";\nimport VisualMath from \"qtype_shortmath/visual-math-input\";\n\nlet lastFocusedInput = null;\nlet dragged;\nlet nodes;\nlet draggedIndex;\nlet isSuccess = true;\n\n/**\n * An EditorInput represents a collection of three items:\n * \n * 1. HTMLInputElement - shows the evaluated latex \n * 2. MathQuill field  - visual representation of math expressions\n * 3. \n */\nclass EditorInput extends VisualMath.Input {\n\n    constructor(input, parent) {\n        super(input, parent);\n        // textarea inherited from VisualMath.Input\n        this.textarea.addEventListener(\"focusout\", () => {\n            lastFocusedInput = this;\n        });\n        this.rawInput.setAttribute(\"required\", true);\n        this.rawInput.classList.add(\"form-control\");\n        let errorDiv = document.createElement(\"div\");\n        errorDiv.classList.add(\"invalid-feedback\", \"text-nowrap\");\n        this.parent.appendChild(errorDiv);\n    }\n\n    change() {\n        super.onEdit = (rawInput, mathInput) => {\n            rawInput.value = mathInput.latex();\n            if (!isSuccess && rawInput.closest(\".test-box\") !== null) {\n                if (rawInput.value.length === 0) {\n                    rawInput.parentElement.children.forEach(element => {\n                        element.classList.remove(\"form-control\", \"is-valid\");\n                        element.classList.add(\"form-control\", \"is-invalid\");\n                    });\n                } else {\n                    rawInput.parentElement.children.forEach(element => {\n                        element.classList.remove(\"form-control\", \"is-invalid\");\n                        element.classList.add(\"form-control\", \"is-valid\");\n                    });\n                }\n            }\n            rawInput.dispatchEvent(new Event(\"change\"));\n        };\n    }\n}\n\nclass EditorControl extends VisualMath.Control {\n\n    constructor(name, text, onClick, command) {\n        super(name, text, onClick);\n        this.command = command;\n    }\n\n    enable() {\n        super.enable();\n\n        // this.element.removeEventListener(\"click\");\n        this.element.onclick = event => {\n            event.preventDefault();\n\n            document.querySelector(\":focus\").blur();\n\n\n            if (lastFocusedInput !== null) {\n                if (lastFocusedInput.mathInput === undefined) {\n                    // For plain text mathInput.\n                    lastFocusedInput.focus();\n                    return;\n                }\n                this.onClick(lastFocusedInput.mathInput);\n                lastFocusedInput.mathInput.focus();\n            }\n        };\n\n        this.element.id = this.name;\n        this.element.setAttribute(\"draggable\", true);\n\n        this.element.addEventListener(\"dragstart\", event => {\n            dragged = event.target;\n            nodes = Array.from(dragged.parentNode.children); //buttons on the control list\n            draggedIndex = nodes.indexOf(dragged);\n            // Add the target element's id to the data transfer object\n            event.dataTransfer.setData(\"text\", event.target.id);\n            event.dataTransfer.dropEffect = \"move\";\n            // event.target.style.opacity = 0.5;\n            document.querySelector(\".delete-box\").classList.remove(\"d-none\");\n        });\n\n        this.element.addEventListener(\"dragend\", event => {\n            event.target.style.opacity = \"\";\n            document.querySelector(\":focus\").blur();\n            if (document.getElementById(\"placeholder\") !== null) {\n                document.getElementById(\"placeholder\").replaceWith(dragged);\n            }\n            document.querySelector(\".delete-box\").classList.add(\"d-none\");\n        });\n\n    }\n\n}\n\nclass EditorControlList extends VisualMath.ControlList {\n\n    constructor(wrapper) {\n        super(wrapper);\n    }\n\n    /**\n     * Add buttons to toolbar.\n     *\n     * @param buttonMathInput\n     * @param expressionMathInput\n     * @returns {boolean}\n     */\n    add(buttonMathInput, expressionMathInput) {\n\n        // document.querySelector(\":focus\").blur();\n        console.log(buttonMathInput);\n        console.log(expressionMathInput);\n        // TODO: Why get the outerHTML?\n        // let mathquillExpressionString = buttonMathInput.__controller.container[0].querySelector(\".mq-root-block\").outerHTML;\n        // const mathquillExpressionHtml = DOMParser.prototype.parseFromString(mathquillExpressionString);\n\n        const mathquillExpression = buttonMathInput.__controller.container[0].querySelector(\".mq-root-block\");\n\n        // let mqEmptyElement = mathquillExpression.querySelector(\".mq-empty\");\n        // if (mqEmptyElement.closest(\".mq-int\") !== null && mqEmptyElement !== null) {\n        //    // Removes super/subscript white space in buttons.\n        //     mqEmptyElement.closest(\".mq-supsub\").parentElement.removeChild(mqEmptyElement.closest(\".mq-supsub\"));\n        // }\n        // mqEmptyElement.parentElement.removeChild(mqEmptyElement); // Removes white space from buttons.\n\n        // const span = document.createElement(\"span\");\n        // span.appendChild();\n        // mathquillExpression.querySelector(\"big\").replaceWith((i, element) => {\n        //     return `<span>${element}</span>`;\n        // });\n\n        // let $frac = mathquillExpression.querySelector(\".mq-fraction\"); // Division symbol.\n        // if ($frac.length > 0) {\n        //     mathquillExpression.append(\"<var>\" + mathquillExpression.querySelector(\".mq-numerator\").text() + \"</var>\" +\n        //         \"<span>/</span><var>\" + mathquillExpression.querySelector(\".mq-denominator\").text() + \"</var>\");\n        //     $frac.remove();\n        // }\n\n        // let $binom = mathquillExpression.querySelector(\".mq-paren.mq-scaled\"); // Binomial symbol.\n        // let $supsub = mathquillExpression.querySelector(\".mq-supsub\"); // Power symbol.\n        // let $vars = mathquillExpression.querySelector(\"var\");\n\n        // if ($binom.length > 0 || $supsub.length > 0 || $vars.length > 0) {\n        //     if ($binom.length > 0) {\n        //         $binom.css(\"transform\", \"scale(0.8, 1.5)\"); // Resize binomial.\n        //         mathquillExpression.querySelector(\".mq-array.mq-non-leaf\").parentElement.classList.add(\"mt-0\");\n        //         $html.querySelector(\"var\").parentElement.style.fontSize = \"14px\";\n        //     }\n        //     mathquillExpressionString =\n        //         `<div class=\"mq-math-mode\" style=\"cursor:pointer;font-size:100%;\" id=\"${Date.now()}\">\n        //           ${mathquillExpression.outerHTML}\n        //       </div>`;\n        //     mathquillExpression = DOMParser.prototype.parseFromString(mathquillExpressionString);\n        // }\n\n        const mathquillExpressionString = mathquillExpression.outerHTML;\n\n        this.addControl(\"btn_\" + Date.now(), mathquillExpressionString, expressionMathInput.latex());\n        return true;\n    }\n\n    addAll(value) {\n\n        let name = value[\"name\"];\n        let html = value[\"button\"];\n        let command = value[\"expression\"];\n        this.addControl(name, html, command);\n    }\n\n    addControl(name, html, command) {\n        let control = new EditorControl(name, html, mathInput => mathInput.write(command), command);\n        this.controls[name] = control;\n        control.enable();\n        this.wrapper.append(control.element);\n    }\n}\n\n/**\n * Entry point of this file. All the parameters come from view_editor.php at $PAGE->requires->js_call_amd\n */\n// \"test\", \"btn\", \"exp\", 0, \"\", \"/question/type/shortmath/editor_action.php\", \"/question/type/shortmath/editor_manager.php\"\nexport const initialize = (templateId, templateName, managerPath) => {\n\n\n    // Mustache template context for editor page\n    const context = {\n        \"testInputLabel\": \"Test\",\n        \"inputSize\": 30,\n        \"inputBoxTitle\": \"Add Buttons\",\n        \"testBoxTitle\": \"Test Buttons/Save Template\",\n        \"buttonInputLabel\": \"Button\",\n        \"inputSpanClass\": \"answer\",\n        \"expressionInputLabel\": \"Expression\",\n        \"buttonClass\": \"btn btn-primary\",\n        \"addButtonValue\": \"Add\",\n        \"deleteIconClass\": \"fa fa-trash fa-2x\",\n        \"nameInputLabel\": \"Name\",\n        \"saveButtonValue\": \"Save\",\n        \"backButtonValue\": \"Go Back\",\n        \"toolbarTitle\": \"Toolbar\",\n        \"nameErrorMessage\": \"Name cannot be empty!\"\n    };\n\n    let templateNameInput;\n\n    let vmiButton; // EditorControl object\n    let buttonRawInput; // Raw HTMLInputElement\n    let buttonMathInput; // MathQuill field\n\n    let vmiExpression;\n    let expressionRawInput;\n    let expressionMathInput;\n\n    let vmiTest;\n    let testRawInput;\n    let testMathInput;\n\n    let controlsWrapper;\n    let vmiTestAndSaveContainer; // Container for testing the buttons for this template\n    let target;\n\n    let saveButton;\n    let saveForm;\n    let controls;\n\n    // To prevent calls to show test box repeatedly\n    let isDataVisible = false;\n\n    /**\n     * Shortmath input fields\n     */\n    const initInputFields = () => {\n\n        testRawInput = document.querySelector(\"#test\");\n        buttonRawInput = document.querySelector(\"#btn\");\n        expressionRawInput = document.querySelector(\"#exp\");\n        // Remove class \"d-inline\" added in shortanswer renderer class, which prevents input from being hidden.\n        testRawInput.classList.remove(\"d-inline\");\n\n        vmiTest = new EditorInput(testRawInput, \".answer\");\n        vmiTest.change();\n        testMathInput = vmiTest.mathInput;\n        console.log(testMathInput);\n\n        if (testRawInput.value) {\n            testMathInput.write(\n                testRawInput.value\n            );\n        }\n\n        // Remove class \"d-inline\" added in shortanswer renderer class, which prevents input from being hidden.\n        buttonRawInput.classList.remove(\"d-inline\");\n\n        vmiButton = new EditorInput(buttonRawInput, \".answer\");\n        vmiButton.change();\n        buttonMathInput = vmiButton.mathInput;\n\n        // Remove class \"d-inline\" added in shortanswer renderer class, which prevents input from being hidden.\n        expressionRawInput.classList.remove(\"d-inline\");\n\n        vmiExpression = new EditorInput(expressionRawInput, \".answer\");\n        vmiExpression.change();\n        expressionMathInput = vmiExpression.mathInput;\n\n    };\n\n    /**\n     * Wrapper for toolbar and drag and drop functionality for buttons\n     */\n    const initControlsWrapper = () => {\n\n        controlsWrapper = document.querySelector(\".controls_wrapper\");\n\n        controlsWrapper.classList.add(\"visual-math-input-wrapper\");\n        controlsWrapper.id = \"target\";\n\n        controlsWrapper.addEventListener(\"drop\", event => {\n            event.preventDefault();\n\n            if (target.id === dragged.id) {\n                event.dataTransfer.clearData();\n                return;\n            }\n\n            document.getElementById(\"placeholder\").replaceWith(dragged);\n            event.dataTransfer.clearData();\n        });\n\n        controlsWrapper.addEventListener(\"dragover\", event => {\n            event.preventDefault();\n            event.dataTransfer.dropEffect = \"move\";\n        });\n\n        controlsWrapper.addEventListener(\"dragenter\", event => {\n\n            let targetId;\n            if (event.target.classList.contains(\"visual-math-input-wrapper\")) {\n                targetId = event.target.lastChild.id;\n            } else if (event.target.nodeName !== \"BUTTON\") {\n                targetId = event.target.closest(\"button\").id;\n            } else {\n                targetId = event.target.id;\n            }\n\n            if (targetId === \"placeholder\") {\n                return;\n            }\n\n            target = document.getElementById(targetId);\n\n            let targetIndex = nodes.indexOf(target);\n            if (draggedIndex === targetIndex) { //movement within button\n                return;\n            }\n\n            let empty = document.createElement(\"button\");\n            empty.id = \"placeholder\";\n            empty.classList.add(\"visual-math-input-control\", \"btn\", \"btn-primary\");\n            empty.setAttribute(\"draggable\", true);\n            // empty.style.border = \"2px solid red\";\n\n            if (target.parentNode.contains(dragged)) {\n                target.parentNode.removeChild(dragged);\n            } else {\n                target.parentNode.removeChild(document.getElementById(\"placeholder\"));\n            }\n\n            if (draggedIndex < targetIndex) {\n                if (target.parentNode.lastChild !== target) {\n                    target.parentNode.insertBefore(empty, target.nextSibling); //left to right\n                } else {\n                    target.parentNode.appendChild(empty);\n                }\n            } else {\n                target.parentNode.insertBefore(empty, target); //right to left\n            }\n\n            nodes = Array.from(target.parentNode.children);\n            draggedIndex = nodes.indexOf(empty);\n        });\n    };\n\n    /**\n     * To add buttons to toolbar in create mode/load buttons in edit mode\n     */\n    const initAddForm = async () => {\n        const addForm = document.querySelector(\"#addForm\");\n        const addButton = document.querySelector(\"#add\");\n\n        vmiTestAndSaveContainer = document.querySelector(\".test-box\");\n        controls = new EditorControlList(controlsWrapper);\n\n        vmiButton.parent.querySelector(\".invalid-feedback\").textContent = \"Button is empty or invalid!\";\n        vmiExpression.parent.querySelector(\".invalid-feedback\").textContent = \"Expression is empty or invalid!\";\n\n        addButton.addEventListener(\"click\", event => {\n            event.preventDefault();\n\n            addForm.dispatchEvent(new Event(\"submit\"));\n        });\n        addForm.addEventListener(\"submit\", event => {\n            event.preventDefault();\n            event.stopPropagation();\n\n            if (addForm.checkValidity() === false) {\n                isSuccess = false;\n\n                // TODO: Is it really needed to unfocus the add button?\n                document.querySelector(\":focus\").blur();\n\n                addForm.querySelectorAll(\"input[type=text].form-control\").forEach(element => {\n                    if (element.value.length === 0) {\n                        element.parentElement.querySelector(\".visual-math-input-field\").classList.add(\"form-control\", \"is-invalid\");\n                    }\n                });\n            } else {\n                isSuccess = controls.add(buttonMathInput, expressionMathInput);\n                isSuccess = true;\n                if (isSuccess) {\n                    if (!isDataVisible) {\n                        isDataVisible = true;\n                    }\n\n                    addForm.querySelector(\".visual-math-input-field\").classList.remove(\"form-control\", \"is-valid\");\n\n                    //clear inputs\n                    buttonMathInput.latex(\"\");\n                    expressionMathInput.latex(\"\");\n                }\n            }\n        });\n\n\n\n        try {\n            console.log(templateId);\n            const template = await getShortmathTemplate(templateId);\n\n            console.log(template);\n\n        } catch (error) {\n            notification.addNotification({\n                message: error,\n                type: \"error\"\n            });\n        }\n\n        // Ajax.call([{\n        //     methodname: \"qtype_shortmath_get_template\",\n        //     args: { questionid: templateId },\n        //     done: response => {\n        //         // Do something with the response\n        //         let data = JSON.parse(response);\n        //         isDataVisible = true;\n        //         JSON.parse(data[\"template\"]).forEach(controls.addAll.bind(controls));\n        //     },\n        //     fail: () => {\n        //         notification.addNotification({\n        //             message: `Couldn't add control`,\n        //             type: \"error\"\n        //         });\n        //     }\n        // }]);\n    };\n\n    /**\n     * To delete buttons from toolbar\n     */\n    const initDeleteButton = async () => {\n        let deleteIcon = document.querySelector(\".delete-icon\");\n\n        deleteIcon.addEventListener(\"dragover\", event => {\n            event.preventDefault();\n            event.dataTransfer.dropEffect = \"move\";\n        });\n\n        deleteIcon.addEventListener(\"drop\", event => {\n            event.preventDefault();\n            let parentNode = dragged.parentNode;\n            if (parentNode !== null) {\n                parentNode.removeChild(dragged);\n                if (parentNode.firstElementChild === null) {\n                    testMathInput.latex(\"\");\n                    isDataVisible = false;\n                }\n            } else {\n                let placeholder = document.getElementById(\"placeholder\");\n                if (placeholder !== null) {\n                    placeholder.parentNode.removeChild(placeholder);\n                }\n            }\n            event.dataTransfer.clearData();\n        });\n    };\n\n    /**\n     * To save toolbar template in database\n     */\n    const initSaveForm = async () => {\n        const saveButton = document.querySelector(\"#save\");\n        templateNameInput = document.querySelector(\"#name\");\n        const saveForm = document.querySelector(\"#saveForm\");\n\n        templateNameInput.addEventListener(\"blur\", () => {\n            lastFocusedInput = templateNameInput;\n        });\n\n        saveForm.addEventListener(\"submit\", event => {\n            event.preventDefault();\n\n            if (saveForm.checkValidity() === false) {\n                saveForm.classList.add(\"was-validated\");\n                event.stopPropagation();\n            } else {\n                let data = [];\n                let items = controls.controls;\n\n                controlsWrapper.querySelectorAll(\"button\").forEach(element => {\n                    let control = items[element.id];\n                    data.push({\n                        name: control[\"name\"],\n                        button: control[\"text\"],\n                        expression: control[\"command\"]\n                    });\n                });\n\n                const templateId = saveShortmathTemplate(templateNameInput, JSON.stringify(data), templateId);\n                onSave(templateId);\n\n                // }).fail((jqXHR, textStatus, errorThrown) => {\n                //     notification.addNotification({\n                //         message: textStatus + \": \" + errorThrown,\n                //         type: \"error\"\n                //     });\n                //     saveButton.blur();\n                // });\n                saveForm.classList.remove(\"was-validated\");\n            }\n        });\n\n        saveButton.addEventListener(\"click\", event => {\n            event.preventDefault();\n            saveForm.dispatchEvent(new Event(\"submit\"));\n        });\n    };\n\n    const onSave = (templateId) => {\n        if (templateId > 0) {\n            notification.addNotification({\n                message: \"Configuration saved! Please wait...\",\n                type: \"success\"\n            });\n\n            // TODO: display: block; or visibility: visible; ?\n            document.querySelector(\"overlay-div\").style.display = \"block\";\n\n            setTimeout(() => {\n                window.location.replace(managerPath);\n            }, 5000);\n        } else {\n            notification.addNotification({\n                message: \"Configuration saved!\",\n                type: \"success\"\n            });\n\n            // TODO: Is controlsWrapper a jquery element or plain dom element?\n            controlsWrapper.innerHTML = \"\";\n            controls = new EditorControlList(controlsWrapper);\n            templateNameInput.value = \"\";\n            testMathInput.latex(\"\");\n            buttonMathInput.latex(\"\");\n            expressionMathInput.latex(\"\");\n            isDataVisible = false;\n        }\n        saveButton.blur();\n        return { controls, isDataVisible };\n    };\n\n    /**\n     * To add back button to editor page\n     */\n    const initBackButton = async () => {\n        const backButton = document.querySelector(\"#back\");\n\n        backButton.addEventListener(\"click\", event => {\n            event.preventDefault();\n            window.location.replace(managerPath);\n        });\n    };\n\n    Templates.render(\"qtype_shortmath/editor\", context).then(\n        (html, js) => {\n            Templates.appendNodeContents(`div[role=\"main\"]`, html, js);\n            initInputFields();\n            initControlsWrapper();\n            initAddForm();\n            initDeleteButton();\n            initSaveForm();\n            initBackButton();\n        }).fail(notification.exception);\n};\n"],"file":"view-editor.min.js"}